{
  "Дополнительные параметры типа char_limit нужно присваивать в конструкторах соответствующих компонент" : 0,
  "dataset_reader": {},
  "dataset_iterator": {},
  "chainer": {
    "in": ["x"],
    "in_y": ["y"],
    "pipe": [
      {
        "description": "Возвращает utt_new, если ... и utt_wnw, если ... ",
        "id": "FebRecallContext",
        "class_name": "deeppavlov.models.feb.fc_recall_context:FebRecallContext",
        
        "in": ["x"],     
        "out": ["utt_new", "utt_wnw"]
      },

      {
        "in": ["utt_new"],
        "class_name": "deeppavlov.models.feb.fc_text_parser:FebTextParser",
        "out": ["parsed_new"]
      },
      {
        "in": ["parsed_new"],
        "class_name": "deeppavlov.models.feb.fc_ner:FebNER",
        "out": ["ner_new"]
      },
      {
        "class_name": "deeppavlov.models.feb.fc_intent_classifier:IntentClassifier",
        "in": ["ner_new"],
        "intent_classifier_type" : "regular",
        "out": ["int_bookq", "int_book_negative"]
      },
      {
        "in": ["int_bookq"],
        "class_name": "deeppavlov.models.feb.fc_nent_to_qent:NentToQent",
        "out": ["identified_book_q"]
      },
      {
        "in": ["identified_book_q"],
        "class_name": "deeppavlov.models.feb.fc_wikidata_query:WikidataQuery",
        "out": ["book_query_result", "book_query_error"]
      },

      {
        "description": "Генератор текста в случае отсутствия ошибок",
        "class_name": "deeppavlov.models.feb.fc_text_generator:FebTextGenerator",
        "in": ["book_query_result"],
        "out": ["result_string_ok"]
      },

      {
        "id": "error_analysis_data",
        "description": "Анализатор ошибок",
        "class_name": "deeppavlov.models.feb.fc_error_analysis:FebErrorAnalysis",
        "error_place": "utt.pattern_type",
        "in": ["book_query_error"],
        "out": ["no_class", "nth_but_class", "no_qid", "no_data"]
      },

      {
        "description": "Генератор текста об ошибке-2",
        "class_name": "deeppavlov.models.feb.fc_text_generator:FebTextGenerator",
        "template": "nth_but_class",
        "pattern_type_path": "#error_analysis_data.error_place",
        "in": ["nth_but_class"],
        "out": ["book_q_error"]
      },
      {
        "description": "Генератор текста об ошибке-3",
        "class_name": "deeppavlov.models.feb.fc_text_generator:FebTextGenerator",
        "template": "no_qid",
        "pattern_type_path": "#error_analysis_data.error_place",
        "in": ["no_qid"],
        "out": ["book_q_error"]
      },
      {
        "description": "Генератор текста об ошибке-4",
        "class_name": "deeppavlov.models.feb.fc_text_generator:FebTextGenerator",
        "template": "no_data",
        "pattern_type_path": "#error_analysis_data.error_place",
        "in": ["no_data"],
        "out": ["book_q_error"]
      },      

      {
        "description": "Предлагаем альтернативы (если возможно)",
        "class_name": "deeppavlov.models.feb.fc_alternative_answer:FebAlternativeAnswer",
        "in": ["book_query_error"],
        "out": ["alternative_answer_yes", "alternative_answer_no"]
      },

      {
        "description": "Генератор текста об альтернативе",
        "class_name": "deeppavlov.models.feb.fc_side_text_generator:FebSideTextGenerator",

        "template": "have_alternative",

        "in": ["alternative_answer_yes"],
        "out": ["alternative_string"]
      },
      {
        "description": "Генератор текста об об отсутсвии альтернативы",
        "class_name": "deeppavlov.models.feb.fc_side_text_generator:FebSideTextGenerator",

        "template": "no_alternative",

        "in": ["alternative_answer_no"],
        "out": ["alternative_string_error"]
      },     

      {
        "description": "Объединяем utt=book_q_error с сообщением alternative_string",
        "in": ["book_q_error", "alternative_string"],
        "class_name": "deeppavlov.models.feb.fc_text_concatenator:FebTextConcatenator",
        "out": ["result_string_alternative"]
      },
      {
        "description": "Объединяем utt=book_q_error с сообщением об отстуствии альтернативы alternative_string_error",
        "in": ["book_q_error", "alternative_string_error"],
        "class_name": "deeppavlov.models.feb.fc_text_concatenator:FebTextConcatenator",
        "out": ["result_string_error"]
      },


      {
        "id": "error_analysis_intent",
        "description": "Анализатор ошибок",
        "class_name": "deeppavlov.models.feb.fc_error_analysis:FebErrorAnalysis",

        "error_place": "utt.pattern_type",
        "in": ["int_book_negative"],
        "out": ["no_class", "nth_but_class", "no_qid", "no_data"]
      },
      
      {
        "description": "Генератор текста в случае невозможности распознать интент",
        "class_name": "deeppavlov.models.feb.fc_text_generator:FebTextGenerator",
        "template": "no_class",
        "pattern_type_path": "#error_analysis_intent.error_place",

        "in": ["no_class"],
        "out": ["result_string_negative"]
      },


      {
        "in": ["result_string_negative"],
        "class_name": "deeppavlov.models.feb.fc_memorize_context:FebMemorizeContext",
        "memorize": false,
        "out": ["val_str"]
      },

      {
        "in": ["result_string_ok"],
        "class_name": "deeppavlov.models.feb.fc_memorize_context:FebMemorizeContext",
        "memorize": false,
        "out": ["val_str"]
      },
      {
        "in": ["result_string_alternative"],
        "class_name": "deeppavlov.models.feb.fc_memorize_context:FebMemorizeContext",
        "memorize": false,
        "out": ["val_str"]
      },
      {
        "in": ["result_string_error"],
        "class_name": "deeppavlov.models.feb.fc_memorize_context:FebMemorizeContext",
        "memorize": false,
        "out": ["val_str"]
      },


      {
        "description": "ВЕТКА ДА-НЕТ КЛАССИФИКАТОРА",
        "in": ["utt_wnw"],
        "class_name": "deeppavlov.models.feb.fc_text_parser:FebTextParser",
        "out": ["parsed_wnw"]
      },

      {
        "class_name": "deeppavlov.models.feb.fc_intent_classifier:IntentClassifier",
        "in": ["parsed_wnw"],
        "intent_classifier_type" : "regular",
        "out": ["int_wnw_yes", "int_wnw_no", "int_wnw_negative_class"]
      },
      {
        "class_name": "deeppavlov.models.feb.fc_load_answer:LoadAnswer",
        "in": ["int_wnw_yes"],
        "out": ["book_query_result"]
      },

      {
        "description": "Генератор текста в результате отрицательного ответа в ветке Yes-No",
        "class_name": "deeppavlov.models.feb.fc_side_text_generator:FebSideTextGenerator",

        "template": "wnw_no",

        "in": ["int_wnw_no"],
        "out": ["result_wnw_no"]
      },
      {
        "in": ["result_wnw_no"],
        "class_name": "deeppavlov.models.feb.fc_memorize_context:FebMemorizeContext",
        "memorize": false,
        "out": ["val_str"]
      },

      {
        "in": ["int_wnw_negative_class"],
        "class_name": "deeppavlov.models.feb.fc_ner:FebNER",
        "out": ["ner_new"]
      }

    ],
    "out": ["val_str"]
  },
  "train": {},
  "metadata": {
    "variables": {
      "ROOT_PATH": "~/.deeppavlov",
      "DOWNLOADS_PATH": "{ROOT_PATH}/downloads",
      "MODELS_PATH": "{ROOT_PATH}/models",
      "CONFIGS_PATH": "{DEEPPAVLOV_PATH}/configs"
    },
    "requirements": [],
    "labels": {
      "telegram_utils": "feb_test1_bot_label",
      "server_utils": "feb_test1_bot_label"
    },
    "download": []
  }
}
